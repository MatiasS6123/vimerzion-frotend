<section class="p-6 bg-[#f9f9f9] rounded shadow-lg">
  <h1 class="text-2xl font-bold font-[NexaHeavy] text-[#1f1062] mb-6 text-center">
    Detalle de Compra
  </h1>

  <!-- Productos -->
  <div class="mb-6">
    <h2 class="text-xl font-bold font-[NexaRegular] text-[#1f1062] mb-4">
      Productos
    </h2>
    <ul class="divide-y divide-gray-200">
      <li
        *ngFor="let item of carrito"
        class="py-2 flex justify-between items-center"
      >
        <span class="font-[RobotoFlex] text-gray-700">
          {{ item.nombre }} (x{{ item.cantidad }})
        </span>
        <span class="font-bold text-[#1f1062]">{{ formatearPesos(item.subtotal ?? 0) }}</span>
      </li>
    </ul>
    <p class="text-lg font-bold mt-4 font-[NexaBold] text-[#1f1062]">
      Total: {{ formatearPesos(total) }}
    </p>
    <p class="text-lg font-bold mt-4 font-[NexaBold] text-[#1f1062]">
      Total con Envío: {{ formatearPesos(totalConEnvio) }}
    </p>
  </div>

  <!-- Información de Envío -->
  <div class="mb-6">
    <h2 class="text-xl font-bold font-[NexaRegular] text-[#1f1062] mb-4">
      Información de Envío
    </h2>

    <p class="cursor-pointer text-blue-500 underline"
    (click)="abrirModal()">Revisa Aqui las opciones de envio</p>
    <br>

   <!-- Modal -->
<div
class="fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50"
*ngIf="modalVisible"
>
<div class="bg-white p-8 rounded shadow-lg max-w-4xl w-full max-h-[90vh] overflow-y-auto">
  <h2 class="text-2xl font-bold mb-6 text-center text-[#1f1062]">
    Opciones de Envío
  </h2>
  <div class="flex justify-center items-center">
    <img
      src="assets/Mapa-STGO.svg"
      alt="Opciones de Envío"
      class="w-full h-auto rounded max-h-[90vh] object-contain"
    />
  </div>
  <button
    class="mt-6 w-full bg-blue-500 text-white py-3 rounded font-bold hover:bg-blue-600"
    (click)="cerrarModal()"
  >
    Cerrar
  </button>
</div>
</div>



    <!-- Teléfono -->
    <label class="block mb-2 font-[RobotoFlex] text-[#1f1062]">Teléfono:</label>
    <input
      type="text"
      [(ngModel)]="telefono"
      [ngClass]="{ 'border-red-500': submitted && !telefono }"
      class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#00eefd]"
    />
    <p *ngIf="!telefono" class="text-red-500 text-sm mt-1">El teléfono es obligatorio.</p>

    <!-- Dirección -->
    <label
      class="block mb-2 mt-4 font-[RobotoFlex] text-[#1f1062]"
      >Dirección:</label
    >
    <textarea
      [(ngModel)]="direccion"
      [ngClass]="{ 'border-red-500': submitted && !direccion }"
      rows="3"
      class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#00eefd]"
    ></textarea>
    <p *ngIf="!direccion" class="text-red-500 text-sm mt-1">La dirección es obligatoria.</p>

    <!-- Notas -->
    <label
      class="block mb-2 mt-4 font-[RobotoFlex] text-[#1f1062]"
      >Notas:</label
    >
    <textarea
      [(ngModel)]="notas"
      rows="3"
      [ngClass]="{ 'border-red-500': submitted && !notas}"
      class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#00eefd]"
    ></textarea>

    <!-- Opciones de Envío -->
    <label
  class="block mb-2 mt-4 font-[RobotoFlex] text-[#1f1062]"
  >Opciones de Envío:</label
>
<select
  [(ngModel)]="opcionEnvio"
  [ngClass]="{ 'border-red-500': submitted && !opcionEnvio }"
  (change)="actualizarTotal()"
  class="w-full p-3 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-[#00eefd]"
>
  <option [value]="null" disabled>Seleccione una opción</option> <!-- Opción predeterminada -->
  <option *ngFor="let envio of opcionesEnvio" [value]="envio.costo">
    {{ envio.nombre }} - {{ formatearPesos(envio.costo) }}
  </option>
</select>
<p *ngIf="submitted && !opcionEnvio" class="text-red-500 text-sm mt-1">
  Seleccione una opción de envío.
</p>

  </div>

  <!-- Botón de Confirmar -->
  <button
    class="w-full bg-[#00eefd] text-white py-3 rounded font-bold text-lg hover:bg-[#00d8e2] transition-colors"
    (click)="confirmarCompra()"
  >
    Confirmar Compra
  </button>
</section>
