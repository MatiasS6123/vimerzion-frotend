<nav class="py-4 text-center text-white relative" aria-label="Menú de navegación principal">
  <!-- Logo -->
  <div class="flex justify-center mb-4">
    <img src="assets/logo-vimerzion.svg" class="w-2/3 sm:w-1/2 md:w-1/3 h-auto" alt="Logo de Vimerzion">
  </div>

  <!-- Menú con enlaces activos -->
  <ul class="flex flex-wrap justify-center items-center gap-4 sm:gap-6 md:gap-8">
    <!-- Menú para Personas -->
    <ng-container *ngIf="(isPersonSelected === 'Personas' || isPersonSelected === 'Empresas' )&& !isAdmin && !showOptions " >
      <!-- Inicio -->
      
      <li>
        <a routerLink="/inicio"
          class="text-base font-nexaHeavy  uppercase sm:text-lg md:text-xl  hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': currentSection === 'inicio'}"
          (click)="navigateToInicio()">
          Inicio
        </a>
      </li>
      <li class="hidden sm:block mx-2 md:mx-4">|</li>

      <!-- Servicios -->
      <li class="relative">
        <button (click)="toggleSubmenu('servicios')"
          class="text-base sm:text-lg md:text-xl font-nexaHeavy uppercase hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': activeSubmenu === 'servicios'}">
          Servicios
        </button>

        <!-- Submenú de Servicios -->
        <ul *ngIf="activeSubmenu === 'servicios'" (mouseover)="onSubmenuInteraction()"
          (mouseout)="onSubmenuInteraction()" (click)="onSubmenuInteraction()"
          class="absolute left-0 top-full w-48 bg-white text-gray-800 shadow-lg rounded-lg mt-2 p-4 z-10 text-sm">

          <li class="list-disc ml-4">
            <button [routerLink]="'/tipo-servicio/local'"
              class="hover:text-[#00eefd] font-nexaRegular transition py-1 block">
              Local
          </button>
          </li>

          <li class="list-disc ml-4">
            <button [routerLink]="'/tipo-servicio/domicilio'"
              class="hover:text-[#00eefd] font-nexaRegular transition py-1 block">
              Domicilio
          </button>
          </li>

        </ul>
      </li>
      <li class="hidden sm:block mx-2 md:mx-4">|</li>

      <li class="relative">
        <button (click)="toggleSubmenu('catalogo')"
          class="text-base sm:text-lg md:text-xl font-nexaHeavy uppercase hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': currentSection === 'catalogo'}">
          Catalogo
        </button>
        <ul *ngIf="activeSubmenu === 'catalogo'"
        (mouseover)="onSubmenuInteraction()"
        (mouseout)="onSubmenuInteraction()"
        (click)="onSubmenuInteraction()"
          class="absolute left-0 top-full w-48 bg-white text-gray-800 shadow-lg rounded-lg mt-2 p-4 z-10 text-sm">
          
          <li class="list-disc ml-4">
            <a routerLink="/catalogo" [queryParams]="{ platform: 'jugador_1' }"
              class="hover:text-[#00eefd] font-nexaRegular  transition py-1 block">1 Jugador</a>
          </li>
          <li class="list-disc ml-4">
            <a routerLink="/catalogo" [queryParams]="{ platform: 'jugador_2' }"
              class="hover:text-[#00eefd] font-nexaRegular  transition py-1 block">1 a 2 Jugadores</a>
          </li>
          <li class="list-disc ml-4">
            <a routerLink="/catalogo" [queryParams]="{ platform: 'jugador_3' }"
              class="hover:text-[#00eefd] font-nexaRegular  transition py-1 block">1 a 3 Jugadores</a>
          </li>
          <li class="list-disc ml-4">
            <a routerLink="/catalogo" [queryParams]="{ platform: 'jugador_4' }"
              class="hover:text-[#00eefd] font-nexaRegular  transition py-1 block">1 a 4 Jugadores</a>
          </li>
           <li class="list-disc ml-4">
            <a routerLink="/catalogo" [queryParams]="{ platform: 'simuladores' }"
              class="hover:text-[#00eefd] font-nexaRegular  transition py-1 block">Simuladores</a>
          </li>
        </ul>
      </li>
      <li class="hidden sm:block mx-2 md:mx-4">|</li>
      <li class="relative">
        <button (click)="toggleSubmenu('tecnologias')"
          class="text-base sm:text-lg md:text-xl font-nexaHeavy uppercase   hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': currentSection === 'tecnologias'}">
          Tecnologias
        </button>
        <ul *ngIf="activeSubmenu === 'tecnologias'"
        (mouseover)="onSubmenuInteraction()"
  (mouseout)="onSubmenuInteraction()"
  (click)="onSubmenuInteraction()"
          class="absolute left-0 top-full w-48 bg-white text-gray-800 shadow-lg rounded-lg mt-2 p-4 z-10 text-sm">
          <li class="list-disc ml-4">
            <a routerLink="/tecnologias" [queryParams]="{ nombre: 'tecnologia_haptica' }" class="hover:text-[#00eefd] font-nexaRegular transition py-1 block">Tecnología Haptica</a>
          </li>
          <li class="list-disc ml-4">
            <a routerLink="/tecnologias" [queryParams]="{ nombre: 'realidad_virtual' }" class="hover:text-[#00eefd] font-nexaRegular transition py-1 block">Realidad Virtual</a>
          </li>
          <li class="list-disc ml-4">
            <a routerLink="/tecnologias" [queryParams]="{ nombre: 'realidad_mixta' }" class="hover:text-[#00eefd] font-nexaRegular transition py-1 block">Realidad Mixta</a>
          </li>
          <li class="list-disc ml-4">
            <a routerLink="/tecnologias" [queryParams]="{ nombre: 'hologramas' }" class="hover:text-[#00eefd] font-nexaRegular transition py-1 block">Hologramas</a>
          </li>
          
        </ul>
      </li>
    </ng-container>


    <!-- Opciones para Empresas -->
    <ng-container *ngIf="isPersonSelected === 'Empresas' && !isAuthenticated">

      <li class="hidden sm:block mx-2 md:mx-4">|</li>
      <li class="relative">
        <a routerLink="/contacto"
          class="text-base sm:text-lg md:text-xl font-nexaHeavy uppercase hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': currentSection === 'contacto'}">
          Contacto
        </a>
      </li>
    </ng-container>

    <!-- Opción Login para no autenticados -->
    <ng-container *ngIf=" (isPersonSelected === 'Personas' || isPersonSelected === 'Empresas' ) && !isAuthenticated">
      <li class="hidden sm:block mx-2 md:mx-4">|</li>
      <li>
        <a routerLink="/login" class="text-base sm:text-lg md:text-xl uppercase font-nexaHeavy hover:text-[#00eefd] transition">
          Login
        </a>
      </li>
    </ng-container>

    <!-- Menú para Administradores -->
    <ng-container *ngIf="isAdmin">
      <li>
        <a routerLink="/ordenes"
          class="text-base font-nexaHeavy uppercase sm:text-lg md:text-xl  hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': currentSection === 'ordenes'}">
          Pedidos
        </a>
      </li>
      <li class="hidden sm:block mx-2 md:mx-4">|</li>
      <li>
        <a routerLink="/lista-usuarios"
          class="text-base font-nexaHeavy sm:text-lg md:text-xl uppercase hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': currentSection === 'lista-usuarios'}">
          Usuarios
        </a>
      </li>
      <li class="hidden sm:block mx-2 md:mx-4">|</li>
      <li>
        <a routerLink="/lista-tecnologias"
          class="text-base font-nexaHeavy sm:text-lg md:text-xl uppercase hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': currentSection === 'lista-tecnologias'}">
          Tecnologías
        </a>
      </li>
      <li class="hidden sm:block mx-2 md:mx-4">|</li>
      <li>
        <a routerLink="/lista-juegos"
          class="text-base font-nexaHeavy sm:text-lg md:text-xl uppercase hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': currentSection === 'lista-juegos'}">
          Catálogo
        </a>
      </li>
      <li class="hidden sm:block mx-2 md:mx-4">|</li>
      <li>
        <a routerLink="/lista-paquetes"
          class="text-base font-nexaHeavy sm:text-lg md:text-xl uppercase hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': currentSection === 'lista-paquetes'}">
          Paquetes
        </a>
      </li>
      <li class="hidden sm:block mx-2 md:mx-4">|</li>

      <li>
        <a routerLink="/desafios"
          class="text-base font-nexaHeavy uppercase sm:text-lg md:text-xl  hover:text-[#00eefd] transition relative"
          [ngClass]="{'active-link': currentSection === 'ordenes'}">
          Desafios
        </a>
      </li>
    </ng-container>
  </ul>

  <!-- Botones de la derecha (carrito y perfil) -->
  <div class="absolute top-4 right-4 flex items-center gap-4">
    <!-- Carrito (visible para todos excepto admin) -->
    <ng-container *ngIf="!isAdmin &&  (isPersonSelected === 'Personas')">
      <button (click)="toggleCarrito()" class="relative">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3h18M9 17h6m-3-7v10" />
        </svg>
        <span class="absolute top-0 right-0 bg-red-500 text-white font-montserrat text-xs rounded-full px-2">
          {{ carritoCount }}
        </span>
      </button>
    </ng-container>

    <!-- Icono de usuario y menú desplegable (solo para cliente autenticado) -->
    <div *ngIf="isClient" class="relative">
      <button (click)="toggleUserMenu()" class="text-white hover:text-[#00eefd]">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
            d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
        </svg>
      </button>

      <!-- Menú desplegable -->
      <div *ngIf="isUserMenuOpen"
        class="absolute right-0 mt-2 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5">
        <div class="py-1">
          <a routerLink="/ordenes" class="block font-nexaRegular px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
            Mis Pedidos
          </a>
          <a routerLink="/mi-perfil" class="block font-nexaRegular px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
            Mi Perfil
          </a>
          <button (click)="logout()" class="block font-nexaRegular w-full  text-sm text-gray-700 hover:bg-gray-100">
            Cerrar Sesión
          </button>
        </div>
      </div>
    </div>

    <!-- Botón de cerrar sesión para administrador -->
    <!-- Botón de cerrar sesión (siempre visible) -->
    <button *ngIf="isAdmin" (click)="logout()" class="text-white font-montserrat hover:text-[#00eefd] text-base sm:text-lg font-bold">
      Cerrar Sesión
    </button>

  </div>
</nav>
<!-- Carrito deslizante -->
<app-carrito *ngIf="isCarritoOpen && !isAdmin" (finalizarCompraEvent)="navegarACheckout()"></app-carrito>